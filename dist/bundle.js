(()=>{let t=[];const e=document.querySelector(".library"),i=document.getElementById("bookTitle"),n=document.getElementById("author"),a=document.getElementById("pages"),o=document.getElementById("subBtn");function d(i,n,a){this.title=i,this.author=n,this.pages=a,t.push({title:i,author:n,pages:a});const o=document.createElement("div");e.appendChild(o),o.setAttribute("id","book"),o.setAttribute("data-i",t.length);const d=document.createElement("button");o.appendChild(d),d.textContent="X",d.setAttribute("id","delete"),d.setAttribute("data-i",t.length),d.addEventListener("click",(function(){const t=d.getAttribute("data-i");document.querySelector(`div[data-i="${t}"]`).remove(),async function(t){await firebase.firestore().collection("Books").doc(t).delete()}(i)}));const l=document.createElement("div");o.appendChild(l),l.setAttribute("id","title"),l.textContent=i;const s=document.createElement("div");o.appendChild(s),s.setAttribute("id","author"),s.textContent=n;const r=document.createElement("div");o.appendChild(r),r.setAttribute("id","pages"),r.textContent=`${a} Pages`;const u=document.createElement("input");o.appendChild(u),u.setAttribute("type","checkbox"),u.setAttribute("id","read");const c=document.createElement("label");o.appendChild(c),c.setAttribute("for","read"),c.textContent="Finished?"}i.addEventListener("input",(()=>{i.validity.tooShort?i.setCustomValidity("Do it right"):i.setCustomValidity("")})),n.addEventListener("input",(()=>{n.validity.tooShort?n.setCustomValidity("Do it right"):n.setCustomValidity("")})),a.addEventListener("input",(()=>{a.validity.rangeUnderflow?a.setCustomValidity("Do it right"):a.setCustomValidity("")})),o.addEventListener("click",(e=>{e.preventDefault(),i.validity.valid&&n.validity.valid&&a.validity.valid&&(new d(i.value,n.value,a.value),async function(){for(let e=0;e<t.length;e++){let i={title:t[e].title,author:t[e].author,pages:t[e].pages};await firebase.firestore().collection("Books").doc(i.title).set(i)}}())})),async function(){(await firebase.firestore().collection("Books").get()).forEach((t=>{new d(t.data().title,t.data().author,t.data().pages)}))}()})();