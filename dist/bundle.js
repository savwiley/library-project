(()=>{let t=[];const e=document.querySelector(".library"),i=document.getElementById("bookTitle"),n=document.getElementById("author"),d=document.getElementById("pages"),o=document.getElementById("subBtn");function a(i,n,d){this.title=i,this.author=n,this.pages=d,t.push({title:i,author:n,pages:d});const o=document.createElement("div");e.appendChild(o),o.setAttribute("id","book"),o.setAttribute("data-i",t.length);const a=document.createElement("button");o.appendChild(a),a.textContent="X",a.setAttribute("id","delete"),a.setAttribute("data-i",t.length),a.addEventListener("click",(function(){const t=a.getAttribute("data-i");document.querySelector(`div[data-i="${t}"]`).remove(),localStorage.removeItem(`item-${i}`)}));const l=document.createElement("div");o.appendChild(l),l.setAttribute("id","title"),l.textContent=i;const r=document.createElement("div");o.appendChild(r),r.setAttribute("id","author"),r.textContent=n;const s=document.createElement("div");o.appendChild(s),s.setAttribute("id","pages"),s.textContent=`${d} Pages`;const u=document.createElement("input");o.appendChild(u),u.setAttribute("type","checkbox"),u.setAttribute("id","read");const c=document.createElement("label");o.appendChild(c),c.setAttribute("for","read"),c.textContent="Finished?"}i.addEventListener("input",(()=>{i.validity.tooShort?i.setCustomValidity("Do it right"):i.setCustomValidity("")})),n.addEventListener("input",(()=>{n.validity.tooShort?n.setCustomValidity("Do it right"):n.setCustomValidity("")})),d.addEventListener("input",(()=>{d.validity.rangeUnderflow?d.setCustomValidity("Do it right"):d.setCustomValidity("")})),o.addEventListener("click",(()=>{i.validity.valid&&n.validity.valid&&d.validity.valid&&(new a(i.value,n.value,d.value),function(){for(let e=0;e<t.length;e++)localStorage.setItem(`item-${t[e].title}`,JSON.stringify(t[e]))}())})),function(){const t=Object.keys(localStorage);for(let e=0;e<=t.length;e++){const i=localStorage.getItem(t[e]),n=JSON.parse(i);new a(n.title,n.author,n.pages)}}()})();