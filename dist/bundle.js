(()=>{let t=[];const e=document.querySelector(".library"),i=document.querySelector(".loading"),n=document.getElementById("bookTitle"),a=document.getElementById("author"),o=document.getElementById("pages"),d=document.getElementById("subBtn");function l(i,n,a){this.title=i,this.author=n,this.pages=a,t.push({title:i,author:n,pages:a});const o=document.createElement("div");e.appendChild(o),o.setAttribute("id","book"),o.setAttribute("data-i",t.length);const d=document.createElement("button");o.appendChild(d),d.textContent="X",d.setAttribute("id","delete"),d.setAttribute("data-i",t.length),d.addEventListener("click",(function(){const t=d.getAttribute("data-i");document.querySelector(`div[data-i="${t}"]`).remove(),async function(t){await firebase.firestore().collection("Books").doc(t).delete()}(i)}));const l=document.createElement("div");o.appendChild(l),l.setAttribute("id","title"),l.textContent=i;const s=document.createElement("div");o.appendChild(s),s.setAttribute("id","author"),s.textContent=n;const u=document.createElement("div");o.appendChild(u),u.setAttribute("id","pages"),u.textContent=`${a} Pages`;const r=document.createElement("input");o.appendChild(r),r.setAttribute("type","checkbox"),r.setAttribute("id","read");const c=document.createElement("label");o.appendChild(c),c.setAttribute("for","read"),c.textContent="Finished?"}n.addEventListener("input",(()=>{n.validity.tooShort?n.setCustomValidity("Please input a title."):n.setCustomValidity("")})),a.addEventListener("input",(()=>{a.validity.tooShort?a.setCustomValidity("Please input an author."):a.setCustomValidity("")})),o.addEventListener("input",(()=>{o.validity.rangeUnderflow?o.setCustomValidity("Please input page numbers."):o.setCustomValidity("")})),d.addEventListener("click",(e=>{e.preventDefault(),n.validity.valid&&a.validity.valid&&o.validity.valid&&(new l(n.value,a.value,o.value),async function(){for(let e=0;e<t.length;e++){let i={title:t[e].title,author:t[e].author,pages:t[e].pages};await firebase.firestore().collection("Books").doc(i.title).set(i)}}(),n.value="",a.value="",o.value="")})),async function(){const t=await firebase.firestore().collection("Books").get();i.remove(),t.forEach((t=>{new l(t.data().title,t.data().author,t.data().pages)}))}()})();